(window.webpackJsonp_co_authors_plus_3_4=window.webpackJsonp_co_authors_plus_3_4||[]).push([[1],{18:function(t,e,n){}}]),function(t){function e(e){for(var r,u,a=e[0],i=e[1],s=e[2],p=0,f=[];p<a.length;p++)u=a[p],Object.prototype.hasOwnProperty.call(o,u)&&o[u]&&f.push(o[u][0]),o[u]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);for(l&&l(e);f.length;)f.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],r=!0,a=1;a<n.length;a++){var i=n[a];0!==o[i]&&(r=!1)}r&&(c.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},o={0:0},c=[];function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="";var a=window.webpackJsonp_co_authors_plus_3_4=window.webpackJsonp_co_authors_plus_3_4||[],i=a.push.bind(a);a.push=e,a=a.slice();for(var s=0;s<a.length;s++)e(a[s]);var l=i;c.push([22,1]),n()}([function(t,e){t.exports=window.wp.element},function(t,e){t.exports=window.wp.components},function(t,e){t.exports=window.wp.primitives},function(t,e){t.exports=window.wp.data},function(t,e,n){var r=n(19),o=n(20),c=n(10),u=n(21);t.exports=function(t){return r(t)||o(t)||c(t)||u()}},function(t,e){t.exports=window.wp.i18n},function(t,e){t.exports=window.regeneratorRuntime},function(t,e){t.exports=window.wp.apiFetch},function(t,e,n){var r=n(15),o=n(16),c=n(10),u=n(17);t.exports=function(t,e){return r(t)||o(t,e)||c(t,e)||u()}},function(t,e){t.exports=window.wp.compose},function(t,e,n){var r=n(11);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){t.exports=window.wp.plugins},function(t,e){t.exports=window.wp.editPost},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],_n=!0,r=!1,o=void 0;try{for(var c,u=t[Symbol.iterator]();!(_n=(c=u.next()).done)&&(n.push(c.value),!e||n.length!==e);_n=!0);}catch(t){r=!0,o=t}finally{try{_n||null==u.return||u.return()}finally{if(r)throw o}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},,function(t,e,n){var r=n(11);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";n.r(e);var r=n(8),o=n.n(r),c=n(0),u=n(1),a=n(12),i=n(13),s=n(9),l=n(7),p=n.n(l),f=n(5),h=n(3),b=(n(18),n(2)),m=Object(c.createElement)(b.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(c.createElement)(b.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})),v=Object(c.createElement)(b.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(c.createElement)(b.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})),d=Object(c.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(c.createElement)(b.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"})),w=n(4),O=n.n(w),j=function(t,e,n){var r=e.map((function(t){return t.value})).indexOf(t.value),o=r+("up"==n?-1:1),c=e.map((function(t){return Object.assign({},t)})),u=c[r],a=c.filter((function(t){return t.value?t.value!==u.value:t!==u})),i=O()(a);return i.splice(o,0,u),i},g=function(t){var e=t.display_name,n=t.user_nicename,r=t.email;return{label:"".concat(e," | ").concat(r),display:e,value:n}},y=function(t){var e=t.selectedAuthors,n=t.updateAuthors,r=function(t,r){var o,c;switch(r){case"moveDown":o=j(t,e,"down");break;case"moveUp":o=j(t,e,"up");break;case"remove":c=t,o=e.filter((function(t){return t.value!==c.value}))}n(o)};return e.map((function(t,n){var o=t.display,a=t.value;return Object(c.createElement)("div",{key:a,className:"cap-author"},Object(c.createElement)(u.Flex,{align:"center"},Object(c.createElement)(u.FlexItem,null,Object(c.createElement)("span",null,o)),Object(c.createElement)(u.FlexItem,{justify:"flex-end"},Object(c.createElement)(u.Flex,null,Object(c.createElement)("div",{className:"cap-icon-button-stack"},Object(c.createElement)(u.Button,{icon:m,className:"cap-icon-button",label:Object(f.__)("Move Up","coauthors-plus"),disabled:0===n||1===e.length,onClick:function(){return r(t,"moveUp")}}),Object(c.createElement)(u.Button,{icon:v,className:"cap-icon-button",label:Object(f.__)("Move down","coauthors-plus"),disabled:n===e.length-1||1===e.length,onClick:function(){return r(t,"moveDown")}})),Object(c.createElement)(u.Button,{icon:d,iconSize:20,className:"cap-icon-button",label:Object(f.__)("Remove Author","coauthors-plus"),disabled:1===e.length,onClick:function(){return r(t,"remove")}})))))}))},x=n(6),S=n.n(x),_=n(14),E=n.n(_);function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){E()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={authors:[]},k={setAuthors:function(t){return{type:"SET_AUTHORS",authors:O()(t)}},setAuthorsStore:function(t){return{type:"SET_AUTHORS_STORE",authors:O()(t)}},apiRequest:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET";return{type:"API_REQUEST",path:t,method:e}}},R=Object(h.createReduxStore)("cap/authors",{reducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_AUTHORS":return P(P({},t),{},{authors:[].concat(O()(t.authors),O()(e.authors))});case"SET_AUTHORS_STORE":return P(P({},t),{},{authors:O()(e.authors)})}return t},actions:k,selectors:{getAuthors:function(t){return t.authors},saveAuthors:function(t){return t.authors}},controls:{API_REQUEST:function(t){return p()({path:t.path,method:t.method})}},resolvers:{getAuthors:S.a.mark((function t(e){var n,r,o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat("/coauthors/v1/authors","/").concat(e),t.next=3,k.apiRequest(n);case 3:return r=t.sent,o=r.map((function(t){return g(t)})),t.abrupt("return",k.setAuthors(o));case 6:case"end":return t.stop()}}),t)})),saveAuthors:S.a.mark((function t(e,n){var r,o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.map((function(t){return t.value})).join(","),o="".concat("/coauthors/v1/authors","/").concat(e,"?new_authors=").concat(r),t.next=4,k.apiRequest(o,"POST");case 4:case"end":return t.stop()}}),t)}))}});Object(h.register)(R);var C=Object(s.compose)([Object(s.withState)(),Object(h.withSelect)((function(t){var e=(0,t("core/editor").getCurrentPost)().id;return{postId:e,authors:(0,t("cap/authors").getAuthors)(e)}})),Object(h.withDispatch)((function(t){var e=t("cap/authors").setAuthorsStore;return{setAuthorsStore:function(n){e(n),t("core/editor").editPost({meta:{_non_existing_meta:Date.now()}})}}}))])((function(t){var e=t.authors,n=t.setAuthorsStore,r=Object(c.useState)([]),a=o()(r,2),i=a[0],s=a[1],l=Object(c.useState)([]),f=o()(l,2),h=f[0],b=f[1],m=function(t){n(t),s(t)};return Object(c.useEffect)((function(){e.length&&s(e)}),[e]),Object(c.createElement)(c.Fragment,null,Boolean(i.length)?Object(c.createElement)(c.Fragment,null,Object(c.createElement)(y,{selectedAuthors:i,setSelectedAuthors:s,updateAuthors:m})):Object(c.createElement)(u.Spinner,null),Object(c.createElement)(u.ComboboxControl,{className:"cap-combobox",label:"Select An Author",value:null,options:h,onChange:function(t){var e=function(t,e,n){var r=n.filter((function(e){return e.value===t}));return[].concat(O()(e),[r[0]])}(t,i,h);m(e)},onFilterValueChange:function(t){var e=i.map((function(t){return t.value})).join(",");p()({path:"/coauthors/v1/search/?q=".concat(t,"&existing_authors=").concat(e),method:"GET"}).then((function(t){var e,n=(e=t).length>0?e.map((function(t){return g(t)})):[];b(n)}))}}))})),I=Object(h.select)("core/editor"),M=I.isSavingPost,U=I.getCurrentPost,D=Object(h.select)("cap/authors"),F=D.getAuthors,B=D.saveAuthors,N=!0;Object(h.subscribe)((function(){if(M())N=!1;else if(!N){var t=U().id,e=F(t);B(t,e),N=!0}})),Object(a.registerPlugin)("plugin-coauthors-document-setting",{render:function(){return Object(c.createElement)(i.PluginDocumentSettingPanel,{name:"coauthors-panel",title:"Authors",className:"coauthors"},Object(c.createElement)(C,null))},icon:"users"})}]);